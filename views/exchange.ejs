<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>나의 환전</title>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:300,300i,400,400i,600,600i,700,700i,900,900i" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/styles/style.css">
<link rel="stylesheet" type="text/css" href="/styles/framework.css">
<link rel="stylesheet" type="text/css" href="/fonts/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/styles/boostrap/bootstrap.min.css">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com.font-awesome/4.3.0/css/font-awesome.min.css">
<script
src="https://code.jquery.com/jquery-2.2.4.js"
integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
crossorigin="anonymous"></script>
</head>
    
<body class="theme-light" data-background="none" data-highlight="blue2">
        
<div id="page">
        
    <div id="page-preloader">
        <div class="loader-main"><div class="preload-spinner border-highlight"></div></div>
    </div>
    
	<% include ./header.ejs %>
    
    <!-- <div id="footer-menu" class="footer-menu-5-icons footer-menu-style-1">
        <a href="index.html" class="active-nav"><i class="fa fa-home"></i><span>Home</span></a>
        <a href="index-components.html"><i class="fa fa-star"></i><span>Features</span></a>
        <a href="index-pages.html"><i class="fa fa-heart"></i><span>Pages</span></a>
        <a href="index-search.html"><i class="fa fa-search"></i><span>Search</span></a>
        <a href="#" data-menu="menu-settings"><i class="fa fa-cog"></i><span>Settings</span></a>
        <div class="clear"></div>
    </div> -->
    
    <div class="page-content header-clear-medium">
                
    <div class="content-boxed">
        <div class="content">
            <!-- <table>
                <tr>
                    <td>
                        <div class="form-group">
                            <label for="exampleSelect1">환전 금액</label>
                            <select class="form-control" id="exampleSelect1" style="border-radius: 10px;">
                                <option>미국 USD</option>
                                <option>유럽연합 EUR</option>
                                <option>중국 CNY</option>
                                <option>일본 JPY</option>
                                <option>홍콩 HKD</option>
                                <option>대만 TWD</option>
                                <option>스위스 CHF</option>
                                <option>영국 GBP</option>
                                <option>호주 AUD</option>
                                <option>체코 CZK</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <label class="col-form-label" for="inputDefault">Default input</label>
                            <input type="text" class="form-control" placeholder="100 ~ 2,000" id="inputDefault" style="border-radius: 10px;">           
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        <i class="fa fa-arrows-alt-v fa-2x fa-fw" style="color: red;"></i>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="form-group">
                            <label for="exampleSelect1">환전 금액</label>
                            <select class="form-control" id="exampleSelect1" style="border-radius: 10px;">
                                <option>미국 USD</option>
                                <option>유럽연합 EUR</option>
                                <option>중국 CNY</option>
                                <option>일본 JPY</option>
                                <option>홍콩 HKD</option>
                                <option>대만 TWD</option>
                                <option>스위스 CHF</option>
                                <option>영국 GBP</option>
                                <option>호주 AUD</option>
                                <option>체코 CZK</option>
                            </select>
                        </div>
                    </td>
                    <td>
                        <div class="form-group">
                            <label class="col-form-label" for="inputDefault">Default input</label>
                            <input type="text" class="form-control" placeholder="100 ~ 2,000" id="inputDefault" style="border-radius: 10px;">           
                        </div>
                    </td>
                </tr>
            </table> -->
            <div class="container bottom-0">
                <div class="one-half">
                    <div class="store-product-select-box select-box select-box-2 bottom-50 top-30">
                        <div class="input-style input-style-2 input-required top-40">
                            <span>외화</span>
                            <em><i class="fa fa-angle-down"></i></em>
                            <select id="currency">
                                <option value="option-0" disabled selected>외화 선택</option>
                                <option value="usd">미국 USD</option>
                                <option value="eur">유럽연합 EUR</option>
                                <option value="cny">중국 CNY</option>
                                <option value="jpy">일본 JPY</option>
                                <option value="hkd">홍콩 HKD</option>
                                <option value="twd">대만 TWD</option>
                                <option value="chf">스위스 CHF</option>
                                <option value="gbp">영국 GBP</option>
                                <option value="aud">호주 AUD</option>
                                <option value="czk">체코 CZK</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="one-half last-column">
                    <div class="store-product-select-box select-box select-box-2 bottom- top-10">
                        <div class="input-style input-style-2 input-required top-40">
                    
                        </div>
                    </div>
                </div>
                
                <div class="one-half last-column">
                    <div class="input-style has-icon input-style-1 input-required bottom-30">
                        <i class="input-icon fa fa-coins"></i>
                        <span>KRW</span>
                        <input type="name" placeholder="총 환전할 금액(원)" id="total">
                    </div> 
                </div>    
            </div>

            <div class="clear"></div>

            <div class="container bottom-0">
                <div class="one-half">
                    <div class="input-style has-icon input-style-1 input-required bottom-30">
                        <!-- <i class="input-icon fa fa-globe"></i> -->
                        <img class="caption-image owl-lazy" data-src="images/pictures/korea_flag.png"/>
                        <span>KRW</span>
                        <input type="text" id="code"  readonly>
                    </div> 
                </div>
                <div class="one-half last-column">
                    <div class="input-style has-icon input-style-1 input-required bottom-30">
                        <i class="input-icon fa fa-coins"></i>
                        <span>City</span>
                        <input type="text" id="money" placeholder="money" readonly style="color: #4a89dc"> 
                    </div> 
                </div>
                <div>
                    <label style="color: #4a89dc">환전 예약 날짜 기한</label><br>
                    <input type="date" id="endDate"/><br><br><br>
                </div>
                <div>
                    <label style="color: #4a89dc">목표 환율 지정</label>
                </div>
                <div class="one-half">
                    <div class="input-style has-icon input-style-1 input-required bottom-30">
                        <!-- <i class="input-icon fa fa-globe"></i> -->
                        <img class="caption-image owl-lazy" data-src="images/pictures/korea_flag.png"/>
                        <span></span>
                        <input type="name" id="targetRate" placeholder="">
                    </div> 
                </div>
                <div class="one-half last-column">
                    <div class="input-style has-icon input-style-1 input-required bottom-30">
                        <i class="input-icon fa fa-coins"></i>
                        <span>KRW</span>
                        <input type="name" placeholder="목표 환율로 지정했을 때 금액(원)" id="targetTotal">
                    </div> 
                </div>

                <div class="clear"></div>
                <!-- <a href="javascript:applyFunction(this);" class="button bg-highlight button-full button-m shadow-large button-round-small bottom-25 top-10" style="text-decoration:none">환전 신청하기</a> -->
                <input type="button" onclick="applyFunction();" value="환전하기"/>
            </div>
            
        </div>
    </div>   

    
        <div class="content-boxed">
            <div class="footer">
                <a href="#" class="footer-title uppercase ultrabold"><span class="color-highlight">알아두세요 예시 !!</span></a>
                <p class="footer-text">1일 환전한도는 USD기준 $100 ~ 2,000 까지 입니다.<br>
                    단, 가상계좌 입금방식의 경우 1일 100만원까지 가능합니다.
                </p>
                <div class="footer-socials">
                    <!-- <a href="#" class="round-tiny shadow-medium bg-facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="round-tiny shadow-medium bg-twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="round-tiny shadow-medium bg-phone"><i class="fa fa-phone"></i></a>
                    <a href="#" data-menu="menu-share" class="round-tiny shadow-medium bg-red2-dark"><i class="fa fa-share-alt"></i></a>
                    <a href="#" class="back-to-top round-tiny shadow-medium bg-dark1-light"><i class="fa fa-angle-up"></i></a> -->
                </div>
                <div class="clear"></div>
                <p class="footer-copyright">Copyright &copy; Enabled <span id="copyright-year">2017</span>. All Rights Reserved.</p>
                <p class="footer-links"><a href="#">Privacy Policy</a> | <a href="#">Terms and Conditions</a> | <a href="#" class="back-to-top"> Back to Top</a></p>
                <div class="clear"></div>
            </div>    
        </div>
    </div>
    <!--Menu Call-->
    <div id="menu-call" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="340" data-menu-effect="menu-over">
        <div class="content bottom-0">
            <div class="menu-title"><h1>Tap to Call</h1><p class="color-highlight">Select your Departament by Tapping.</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
            <div class="divider bottom-0"></div>
            <div class="link-list link-list-1 bottom-0">
                <a href="#">
                    <i class="fa fa-credit-card color-red1-dark"></i>
                    <span class="font-13">Sales</span>
                    <em class="bg-highlight">TAP TO CALL</em>
                </a>
                <a href="#">
                    <i class="font-15 fa fa-building color-blue2-dark"></i>
                    <span class="font-13">Office</span>
                    <em class="bg-highlight">TAP TO CALL</em>
                </a>  
                <a href="#">
                    <i class="font-15 fa fa-life-ring color-brown2-dark"></i>
                    <span class="font-13">Support</span>
                    <em class="bg-highlight">TAP TO CALL</em>
                </a>     
                <a href="#">
                    <i class="font-12 fa fa-truck color-magenta2-dark"></i>
                    <span class="font-13">Shipping</span>
                    <em class="bg-highlight">TAP TO CALL</em>
                </a>         
                <a href="#" class="center-text no-border">
                    <span class="font-12 right-10">Monday to Friday - 09:00AM - 05:00PM</span>
                </a>        
            </div>
        </div>
    </div>
    <!--Menu Settings-->
    <div id="menu-settings" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="310" data-menu-effect="menu-over">
        <div class="content bottom-0">
            <div class="menu-title"><h1>Settings</h1><p class="color-highlight">Flexible and Easy to Use</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
            <div class="divider bottom-20"></div>
            <div class="toggle-with-icon">
                <i class="toggle-icon round-tiny fa fa-moon bg-red2-dark color-white"></i>
                <a href="#" class="toggle-switch toggle-ios toggle-off" 
                   data-toggle-theme
                   data-toggle-height="27"
                   data-toggle-width="50"
                   data-toggle-content="toggle-content-1"
                   data-toggle-checkbox="toggle-checkbox-1"
                   data-bg-on="bg-green1-dark" 
                   data-bg-off="">
                    <span class="color-theme regularbold font-13">Dark Mode</span>
                    <strong></strong>
                    <u></u>
                </a>    
            </div>     
            <div class="divider top-25 bottom-0"></div>
            <div class="link-list link-list-2 link-list-long-border">
                <a href="#" data-menu="menu-highlights">
                    <i class="fa fa-tint bg-green1-dark color-white round-tiny"></i>
                    <span>Page Highlight</span>
                    <strong>16 Color Highlights Included</strong>
                    <em class="bg-highlight">HOT</em>
                </a>    
                <a href="#" data-menu="menu-backgrounds" class="no-border">
                    <i class="fa fa-brush bg-blue2-dark color-white round-tiny"></i>
                    <span>Page Background</span>
                    <strong>10 Page Gradients Included</strong>
                    <em class="bg-highlight">NEW</em>
                </a>      
            </div>
        </div> 
        
    </div>    
    <!--Menu Settings Highlights-->
    <div id="menu-highlights" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="380" data-menu-effect="menu-over">
        <div class="content bottom-0">
            <div class="menu-title"><h1>Highlights</h1><p class="color-highlight">Any Element can have a Highlight Color</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
            <div class="divider bottom-0"></div>
            <div class="highlight-changer bottom-30">
                <a href="#" data-change-highlight="blue2"><i class="fa fa-circle color-blue2-dark"></i><span class="color-blue2-light">Default</span></a>
                <a href="#" data-change-highlight="red1"><i class="fa fa-circle color-red1-dark"></i><span class="color-red2-light">Red</span></a>    
                <a href="#" data-change-highlight="orange"><i class="fa fa-circle color-orange-dark"></i><span class="color-orange-light">Orange</span></a>    
                <a href="#" data-change-highlight="pink2"><i class="fa fa-circle color-pink2-dark"></i><span class="color-pink2-light">Pink</span></a>    
                <a href="#" data-change-highlight="magenta2"><i class="fa fa-circle color-magenta2-dark"></i><span class="color-magenta2-light">Purple</span></a>    
                <a href="#" data-change-highlight="aqua"><i class="fa fa-circle color-aqua-dark"></i><span class="color-aqua-light">Aqua</span></a>      
                <a href="#" data-change-highlight="teal"><i class="fa fa-circle color-teal-dark"></i><span class="color-teal-light">Teal</span></a>      
                <a href="#" data-change-highlight="mint"><i class="fa fa-circle color-mint-dark"></i><span class="color-mint-light">Mint</span></a>      
                <a href="#" data-change-highlight="green2"><i class="fa fa-circle color-green2-dark"></i><span class="color-green2-light">Green</span></a>    
                <a href="#" data-change-highlight="green1"><i class="fa fa-circle color-green1-dark"></i><span class="color-green1-light">Grass</span></a>       
                <a href="#" data-change-highlight="yellow2"><i class="fa fa-circle color-yellow2-dark"></i><span class="color-yellow2-light">Sunny</span></a>    
                <a href="#" data-change-highlight="yellow1"><i class="fa fa-circle color-yellow1-dark"></i><span class="color-yellow1-light">Goldish</span></a>
                <a href="#" data-change-highlight="brown1"><i class="fa fa-circle color-brown1-dark"></i><span class="color-brown1-light">Wood</span></a>    
                <a href="#" data-change-highlight="dark1"><i class="fa fa-circle color-dark1-dark"></i><span class="color-dark1-light">Night</span></a>
                <a href="#" data-change-highlight="dark2"><i class="fa fa-circle color-dark2-dark"></i><span class="color-dark2-light">Dark</span></a>
                <div class="clear"></div>
            </div>
            <a href="#" data-menu="menu-settings" class="button button-s button-full button-m button-round-large bg-highlight shadow-large">Back to Settings</a>
        </div>
    </div>    
    <!-- Menu Settings Backgrounds-->
    <div id="menu-backgrounds" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="310" data-menu-effect="menu-over">
        <div class="content">
            <div class="menu-title"><h1>Backgrounds</h1><p class="color-highlight">Change Page Color Behind Content Boxes</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
            <div class="divider bottom-0"></div>
            <div class="background-changer bottom-30">
                <a href="#" data-change-background="none"><i class="bg-theme"></i><span>Default</span></a>
                <a href="#" data-change-background="plum"><i class="body-plum"></i><span class="color-plum-dark">Plum</span></a>
                <a href="#" data-change-background="magenta3"><i class="body-magenta3"></i><span class="color-magenta3-dark">Magenta</span></a>
                <a href="#" data-change-background="dark3"><i class="body-dark3"></i><span class="color-dark3-dark">Dark</span></a>
                <a href="#" data-change-background="violet"><i class="body-violet"></i><span class="color-violet-dark">Violet</span></a>
                <a href="#" data-change-background="red3"><i class="body-red3"></i><span class="color-red3-dark">Red</span></a>
                <a href="#" data-change-background="green3"><i class="body-green3"></i><span class="color-green3-dark">Green</span></a>
                <a href="#" data-change-background="sky"><i class="body-sky"></i><span class="color-sky-dark">Sky</span></a>
                <a href="#" data-change-background="pumpkin"><i class="body-pumpkin"></i><span class="color-pumpkin-dark">Orange</span></a>
                <a href="#" data-change-background="yellow3"><i class="body-yellow3"></i><span class="color-yellow3-dark">Yellow</span></a>
                <div class="clear"></div>
            </div>
            <a href="#" data-menu="menu-settings" class="button button-s button-full button-m button-round-large bg-highlight shadow-large">Back to Settings</a>
        </div>
    </div>
    <!-- Menu Share-->
    <div id="menu-share" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="340" data-menu-effect="menu-over">
        <div class="content bottom-0">
            <div class="menu-title"><h1>Share the Love</h1><p class="color-highlight">Just Tap the Social Icon. We'll add the Link</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
            <div class="divider bottom-0"></div>
        </div>
        <div class="link-list link-list-1 left-15 right-15">
            <a href="#" class="shareToFacebook">
                <i class="font-18 fab fa-facebook color-facebook"></i>
                <span class="font-13">Facebook</span>
                <i class="fa fa-angle-right"></i>
            </a>
            <a href="#" class="shareToTwitter">
                <i class="font-18 fab fa-twitter-square color-twitter"></i>
                <span class="font-13">Twitter</span>
                <i class="fa fa-angle-right"></i>
            </a>
            <a href="#" class="shareToLinkedIn">
                <i class="font-18 fab fa-linkedin color-linkedin"></i>
                <span class="font-13">LinkedIn</span>
                <i class="fa fa-angle-right"></i>
            </a>        
            <a href="#" class="shareToWhatsApp">
                <i class="font-18 fab fa-whatsapp-square color-whatsapp"></i>
                <span class="font-13">WhatsApp</span>
                <i class="fa fa-angle-right"></i>
            </a>   
            <a href="#" class="shareToMail no-border">
                <i class="font-18 fa fa-envelope-square color-mail"></i>
                <span class="font-13">Email</span>
                <i class="fa fa-angle-right"></i>
            </a>
        </div>
    </div>

    <div class="menu-hider"></div>
</div>

<script
  src="https://code.jquery.com/jquery-2.2.4.js"
  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
  crossorigin="anonymous"></script>

<script>
$(function(){
    // $('#currency').focusout(function(){
    //     $('#code').val($('#currency option:selected').val().toUpperCase() + ' (현재 환율로 계산시 예상 금액)');
    // })

    // $('#total').focusout(function(){
    //     var total = $('#total').val();
    //     //$('#total').val($('#total').val().replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,'));

    //     // var expect = total / 1000;
    //     // $('#money').val(expect);
    // })
});     // document.get.ready

function applyFunction(){
    var code = $('#currency option:selected').val();
    var rate;
    // 현재 환율 가져와서 select !!!!
    if(code == 'usd')
    {
        rate = 1000;
    }
    var total = parseInt(($('#total').val()).replace(/,/g,""));
    var endDate = $('#endDate').val();
    var targetRate = $('#targetRate').val();

    console.log(code + ", " + total + ", " + endDate + ", " + targetRate);

    $.ajax({
        url : 'http://localhost:3000/exchange/exchange',
        type : 'POST',
        data : {
            code : code,
            total : total,
            endDate : endDate,
            targetRate : targetRate
        },
        success : function(data){
            console.log(code + " " + total + "\n" + enddDate + " 목표 환율 : " + targetRate);
            alert(code + " " + total + "\n" + enddDate + " 목표 환율 : " + targetRate);
        }
    });
}   // applyFunction();
</script>

<script>
    $('#currency').change(function(){
    var selectCountry = $('#currency option:selected').text();
    
    $.ajax({
        url:'http://localhost:3000/nowRate',
        type : 'GET',
        success:function(data){
            var country = Object.keys(data);
            var nowrate = Object.values(data);
            var selecteRate = '';
            //console.log(commaFunction() + '!')
            for(var count=0; count<country.length; count++)
            {
                if(country[count].includes(selectCountry))
                {
                    var arr = nowrate[count];
                    for(var i=0; i<arr.length;i++) 
                        console.log(arr[1]); // 현찰로 살때 환율
                        selecteRate = arr[1];
                        console.log($('#code').val() + arr[1]);

                        $('#currency').focusout(function(){
                            $('#code').val($('#currency option:selected').val().toUpperCase() + ' (현재 환율로 계산시 예상 금액) ' + arr[1]);
                        })

                        $('#total').focusout(function(){
                            var total = $('#total').val();
                            $('#total').val($('#total').val().replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,'));

                            var rate = parseFloat(arr[1].replace(/,/g,""));
                            console.log('rate : ' + rate + ", total : " + total);
                            var expect = total / rate;
                            $('#money').val(expect);
                        })

                        $('#targetRate').focusout(function(){
                            var rate = parseFloat($('#targetRate').val());
                            var total = parseFloat(($('#total').val()).replace(/,/g,""));
                            console.log('rate : ' + rate + ', total : ' + total);
                            $('#targetTotal').val(total / rate);
                        })
                }
            }           
        }
    })
});
</script>


<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/plugins.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
</body>
